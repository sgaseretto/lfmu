---

title: Synth Dataset Generator


keywords: fastai
sidebar: home_sidebar

summary: "Module to generate Synthetic Datasets to perform tests"
description: "Module to generate Synthetic Datasets to perform tests"
nb_path: "notebooks/01_synth_dataset.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/01_synth_dataset.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="gen_values" class="doc_header"><code>gen_values</code><a href="https://github.com/sgaseretto/lfmu/tree/master/lfmu/synth.py#L6" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>gen_values</code>(<strong><code>n_values</code></strong>=<em><code>10</code></em>, <strong><code>prefix</code></strong>=<em><code>'u'</code></em>)</p>
</blockquote>
<p>Generates a list of values that will be used for generate the dataset</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">gen_values</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;u0&#39;, &#39;u1&#39;, &#39;u2&#39;, &#39;u3&#39;, &#39;u4&#39;, &#39;u5&#39;, &#39;u6&#39;, &#39;u7&#39;, &#39;u8&#39;, &#39;u9&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">gen_added_n_deleted</span><span class="p">(</span><span class="n">l_values</span><span class="p">,</span> <span class="n">max_added</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_deleted</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">deleted</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">added</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l_values</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">deleted</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">max_deleted</span> <span class="ow">and</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mf">0.8</span><span class="p">:</span>
            <span class="n">deleted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">added</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">max_added</span> <span class="ow">and</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mf">0.2</span><span class="p">:</span>
            <span class="n">added</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">added</span><span class="p">,</span> <span class="n">deleted</span>

<span class="n">gen_added_n_deleted</span><span class="p">(</span><span class="n">gen_values</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>([&#39;u3&#39;, &#39;u4&#39;, &#39;u5&#39;], [&#39;u0&#39;, &#39;u1&#39;, &#39;u2&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">exclude_element</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">values_to_exclude</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span> <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="n">values_to_exclude</span><span class="p">)</span><span class="o">.</span><span class="n">issuperset</span><span class="p">({</span><span class="n">x</span><span class="p">})</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>

<span class="k">assert</span> <span class="n">exclude_element</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;Both lists should be equal&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="n">gen_values</span><span class="p">()</span>
<span class="n">added</span><span class="p">,</span> <span class="n">deleted</span> <span class="o">=</span> <span class="n">gen_added_n_deleted</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="n">initial_values</span> <span class="o">=</span> <span class="n">exclude_element</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">added</span><span class="p">)</span>
<span class="n">final_values</span> <span class="o">=</span> <span class="n">exclude_element</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">deleted</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;added&#39;</span><span class="p">,</span><span class="n">added</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;deleted&#39;</span><span class="p">,</span><span class="n">deleted</span><span class="p">),</span> <span class="n">initial_values</span><span class="p">,</span> <span class="n">final_values</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>((&#39;added&#39;, [&#39;u3&#39;, &#39;u4&#39;, &#39;u5&#39;]),
 (&#39;deleted&#39;, [&#39;u0&#39;, &#39;u1&#39;, &#39;u2&#39;]),
 [&#39;u0&#39;, &#39;u1&#39;, &#39;u2&#39;, &#39;u6&#39;, &#39;u7&#39;, &#39;u8&#39;, &#39;u9&#39;],
 [&#39;u3&#39;, &#39;u4&#39;, &#39;u5&#39;, &#39;u6&#39;, &#39;u7&#39;, &#39;u8&#39;, &#39;u9&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset_inicial</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">()</span>
<span class="n">all_users</span> <span class="o">=</span> <span class="n">gen_values</span><span class="p">()</span>
<span class="n">all_items</span> <span class="o">=</span> <span class="n">gen_values</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;i&#39;</span><span class="p">)</span>

<span class="n">users_added</span><span class="p">,</span> <span class="n">users_deleted</span> <span class="o">=</span> <span class="n">gen_added_n_deleted</span><span class="p">(</span><span class="n">all_users</span><span class="p">)</span>
<span class="n">items_added</span><span class="p">,</span> <span class="n">items_deleted</span> <span class="o">=</span> <span class="n">gen_added_n_deleted</span><span class="p">(</span><span class="n">all_items</span><span class="p">)</span>

<span class="n">initial_users</span> <span class="o">=</span> <span class="n">exclude_element</span><span class="p">(</span><span class="n">all_users</span><span class="p">,</span> <span class="n">users_added</span><span class="p">)</span>
<span class="n">initial_items</span> <span class="o">=</span> <span class="n">exclude_element</span><span class="p">(</span><span class="n">all_items</span><span class="p">,</span> <span class="n">items_added</span><span class="p">)</span>

<span class="n">dataset_inicial</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">initial_users</span><span class="p">,</span> <span class="n">initial_items</span><span class="p">)</span>
<span class="n">users_added</span><span class="p">,</span> <span class="n">items_added</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>([&#39;u3&#39;, &#39;u4&#39;, &#39;u5&#39;], [&#39;i3&#39;, &#39;i4&#39;, &#39;i5&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">users_deleted</span><span class="p">,</span> <span class="n">items_deleted</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>([&#39;u0&#39;, &#39;u1&#39;, &#39;u2&#39;], [&#39;i0&#39;, &#39;i1&#39;, &#39;i2&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset_inicial</span><span class="o">.</span><span class="n">mapping</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>({&#39;u0&#39;: 0, &#39;u1&#39;: 1, &#39;u2&#39;: 2, &#39;u6&#39;: 3, &#39;u7&#39;: 4, &#39;u8&#39;: 5, &#39;u9&#39;: 6},
 {&#39;u0&#39;: 0, &#39;u1&#39;: 1, &#39;u2&#39;: 2, &#39;u6&#39;: 3, &#39;u7&#39;: 4, &#39;u8&#39;: 5, &#39;u9&#39;: 6},
 {&#39;i0&#39;: 0, &#39;i1&#39;: 1, &#39;i2&#39;: 2, &#39;i6&#39;: 3, &#39;i7&#39;: 4, &#39;i8&#39;: 5, &#39;i9&#39;: 6},
 {&#39;i0&#39;: 0, &#39;i1&#39;: 1, &#39;i2&#39;: 2, &#39;i6&#39;: 3, &#39;i7&#39;: 4, &#39;i8&#39;: 5, &#39;i9&#39;: 6})</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset_inicial</span><span class="o">.</span><span class="n">fit_partial</span><span class="p">(</span><span class="n">users_added</span><span class="p">,</span> <span class="n">items_added</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset_inicial</span><span class="o">.</span><span class="n">mapping</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>({&#39;u0&#39;: 0,
  &#39;u1&#39;: 1,
  &#39;u2&#39;: 2,
  &#39;u6&#39;: 3,
  &#39;u7&#39;: 4,
  &#39;u8&#39;: 5,
  &#39;u9&#39;: 6,
  &#39;u3&#39;: 7,
  &#39;u4&#39;: 8,
  &#39;u5&#39;: 9},
 {&#39;u0&#39;: 0,
  &#39;u1&#39;: 1,
  &#39;u2&#39;: 2,
  &#39;u6&#39;: 3,
  &#39;u7&#39;: 4,
  &#39;u8&#39;: 5,
  &#39;u9&#39;: 6,
  &#39;u3&#39;: 7,
  &#39;u4&#39;: 8,
  &#39;u5&#39;: 9},
 {&#39;i0&#39;: 0,
  &#39;i1&#39;: 1,
  &#39;i2&#39;: 2,
  &#39;i6&#39;: 3,
  &#39;i7&#39;: 4,
  &#39;i8&#39;: 5,
  &#39;i9&#39;: 6,
  &#39;i3&#39;: 7,
  &#39;i4&#39;: 8,
  &#39;i5&#39;: 9},
 {&#39;i0&#39;: 0,
  &#39;i1&#39;: 1,
  &#39;i2&#39;: 2,
  &#39;i6&#39;: 3,
  &#39;i7&#39;: 4,
  &#39;i8&#39;: 5,
  &#39;i9&#39;: 6,
  &#39;i3&#39;: 7,
  &#39;i4&#39;: 8,
  &#39;i5&#39;: 9})</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset_inicial</span><span class="o">.</span><span class="n">fit_partial</span><span class="p">([],</span> <span class="p">[])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

